!function(e){"use strict";e(document).on("cycle-bootstrap",function(e,i,r){"carousel"===i.fx&&(r.getSlideIndex=function(e){var i=this.opts()._carouselWrap.children(),r=i.index(e);return r%i.length},r.next=function(){var e=i.reverse?-1:1;i.allowWrap===!1&&i.currSlide+e>i.slideCount-i.carouselVisible||(i.API.advanceSlide(e),i.API.trigger("cycle-next",[i]).log("cycle-next"))})}),e.fn.cycle.transitions.carousel={preInit:function(i){i.hideNonActive=!1,i.container.on("cycle-destroyed",e.proxy(this.onDestroy,i.API)),i.API.stopTransition=this.stopTransition;for(var r=0;r<i.startingSlide;r++)i.container.append(i.slides[0])},postInit:function(i){var r,l,t,s,o=i.carouselVertical;i.carouselVisible&&i.carouselVisible>i.slideCount&&(i.carouselVisible=i.slideCount-1);var n=i.carouselVisible||i.slides.length,a={display:o?"block":"inline-block",position:"static"};if(i.container.css({position:"relative",overflow:"hidden"}),i.slides.css(a),i._currSlide=i.currSlide,s=e('<div class="cycle-carousel-wrap"></div>').prependTo(i.container).css({margin:0,padding:0,top:0,left:0,position:"absolute"}).append(i.slides),i._carouselWrap=s,o||s.css("white-space","nowrap"),i.allowWrap!==!1){for(l=0;l<(void 0===i.carouselVisible?2:1);l++){for(r=0;r<i.slideCount;r++)s.append(i.slides[r].cloneNode(!0));for(r=i.slideCount;r--;)s.prepend(i.slides[r].cloneNode(!0))}s.find(".cycle-slide-active").removeClass("cycle-slide-active"),i.slides.eq(i.startingSlide).addClass("cycle-slide-active")}i.pager&&i.allowWrap===!1&&(t=i.slideCount-n,e(i.pager).children().filter(":gt("+t+")").hide()),i._nextBoundry=i.slideCount-i.carouselVisible,this.prepareDimensions(i)},prepareDimensions:function(i){e(window).trigger("resize");var r,l,t,s=i._carouselWrap.children(),o=i.carouselVertical,n=i.carouselVisible||i.slides.length;if(i.carouselFluid&&i.carouselVisible?i._carouselResizeThrottle||this.fluidSlides(i):i.carouselVisible&&i.carouselSlideDimension?(r=n*i.carouselSlideDimension,i.container[o?"height":"width"](r)):i.carouselVisible&&(r=n*e(i.slides[0])[o?"outerHeight":"outerWidth"](!0),i.container[o?"height":"width"](r)),l=i.carouselOffset||0,i.allowWrap!==!1)if(i.carouselSlideDimension)l-=(i.slideCount+i.currSlide)*i.carouselSlideDimension;else for(t=0;t<i.slideCount+i.currSlide;t++){var a=e(s[t])[o?"outerHeight":"outerWidth"](!0);l-=a}var s=i._carouselWrap.children(),c=i.container.width(),d=e(s[i.currSlide]).outerWidth(!0),u=c-d;u>0&&(l+=Math.round(u/2)),i._carouselWrap.css(o?"top":"left",l)},fluidSlides:function(i){function r(){clearTimeout(t),t=setTimeout(l,20)}function l(){i._carouselWrap.stop(!1,!0);var e=i.container.width()/i.carouselVisible;e=Math.ceil(e-o),i._carouselWrap.children().width(e),i._sentinel&&i._sentinel.width(e),n(i)}var t,s=i.slides.eq(0),o=s.outerWidth()-s.width(),n=this.prepareDimensions;e(window).on("resize",r),i._carouselResizeThrottle=r,l()},transition:function(i,r,l,t,s){var o,n={},a=i.nextSlide-i.currSlide,c=i.carouselVertical,d=i.speed;if(i.allowWrap===!1){t=a>0;var u=i._currSlide,p=i.slideCount-i.carouselVisible;a>0&&i.nextSlide>p&&u==p?a=0:a>0&&i.nextSlide>p?a=i.nextSlide-u-(i.nextSlide-p):0>a&&i.currSlide>p&&i.nextSlide>p?a=0:0>a&&i.currSlide>p?a+=i.currSlide-p:u=i.currSlide,o=this.getScroll(i,c,u,a),i.API.opts()._currSlide=i.nextSlide>p?p:i.nextSlide}else t&&0===i.nextSlide?(o=this.getDim(i,i.currSlide,c),s=this.genCallback(i,t,c,s)):t||i.nextSlide!=i.slideCount-1?o=this.getScroll(i,c,i.currSlide,a):(o=this.getDim(i,i.currSlide,c),s=this.genCallback(i,t,c,s));n[c?"top":"left"]=t?"-="+o:"+="+o,i.throttleSpeed&&(d=o/e(i.slides[0])[c?"height":"width"]()*i.speed),i._carouselWrap.animate(n,d,i.easing,s)},getDim:function(i,r,l){var t=e(i.slides[r]);return t[l?"outerHeight":"outerWidth"](!0)},getScroll:function(e,i,r,l){var t,s=0;if(l>0)for(t=r;r+l>t;t++)s+=this.getDim(e,t,i);else for(t=r;t>r+l;t--)s+=this.getDim(e,t,i);return s},genCallback:function(i,r,l,t){return function(){var r=e(i.slides[i.nextSlide]).position(),s=0-r[l?"top":"left"]+(i.carouselOffset||0),o=i._carouselWrap.children(),n=i.container.width(),a=e(o[i.currSlide]).outerWidth(!0),c=n-a;c>0&&(s+=Math.round(c/2)),i._carouselWrap.css(l?"top":"left",s),i._carouselWrap.css(i.carouselVertical?"top":"left",s),t()}},stopTransition:function(){var e=this.opts();e.slides.stop(!1,!0),e._carouselWrap.stop(!1,!0)},onDestroy:function(i){var r=this.opts();r._carouselResizeThrottle&&e(window).off("resize",r._carouselResizeThrottle),r.slides.prependTo(r.container),r._carouselWrap.remove()}}}(jQuery);
